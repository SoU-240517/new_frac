# フラクタル着色アルゴリズム解説

フラクタル画像の着色方法は大きく「発散部」と「非発散部」の2つに分けられます。この文書では両方の領域に適用できる様々なアルゴリズムを解説します。

## 発散部の着色アルゴリズム

発散部とは、フラクタル計算において反復計算を繰り返した際に値が大きくなり、一定の閾値（通常は2）を超えて「発散」した点のことです。

### 反復回数ベースの手法

#### 反復回数線形マッピング（離散型エスケープタイム法）

**原理：** 発散までにかかった反復回数をそのまま色に変換します。

```
色の値 = 反復回数 / 最大反復回数
```

**視覚効果：** 明確な色の縞（バンディング）が発生します。
**メリット：** シンプルで計算コストが低い。
**デメリット：** 色の変化が急激で不自然になりがち。
**用途：** 古典的なマンデルブロ集合の描画に使われます。

#### 反復回数対数マッピング

**原理：** 反復回数を対数変換して使用します。

```
色の値 = log(反復回数) / log(最大反復回数)
```

**視覚効果：** 低反復領域（色の変化が急な部分）の詳細を強調します。
**メリット：** 人間の目は輝度の対数的変化に敏感なため、より自然な見た目になります。
**数学的意義：** 発散速度の対数的性質を反映しています。

### スムージング系手法

反復回数の離散性による色の「段差」を滑らかにする手法です。

#### 標準スムージング

**原理：** 理論的に導出された厳密な補正法。発散時の複素数の大きさ|z|を対数スケールで評価します。

```
nu = log(log(|z|) / log(2)) / log(2)
スムージング値 = 反復回数 - nu
```

**補正項の物理的意味：** |z| > 2 となった時の「過剰発散量」を測定し、反復回数の「小数部分」を推定します。
**効果：** 色の縞模様が滑らかになり、フラクタル境界の詳細が明確になります。

#### 高速スムージング

**原理：** 発散済みの点のみ計算することで最適化。物理的意味は標準版と同じです。

**最適化：** 発散点のみ計算して処理を効率化します（境界付近の精度は標準版と同等）。

#### 指数スムージング

**原理：** わずかに異なる定数項を使用します（視覚効果を調整するため）。

```
スムージング値 = 反復回数 + 1 - log(log(|z|)) / log(2)
```

#### ヒストグラム平坦化

**原理：** 反復回数を確率分布変換後に利用する方法です。

**統計的処理：** 反復回数の分布を一様分布に変換します。
**効果：** 頻度の低い反復回数領域の色分解能を向上させます。

### 幾何学的属性に基づく手法

点の位置や複素数の性質を利用する手法です。

#### 距離カラーリング

**原理：** 点から原点までの距離 |z| を色にマッピングします。

**描画対象：** 原点からの距離 |z|
**特徴：** フラクタル境界での「等高線」的表現になります。

#### 角度カラーリング

**原理：** 複素数の偏角（引数）arg(z) を色相にマッピングします。

```
色相値 = arg(z) / (2π) + 0.5
```

**数学的基礎：** 複素数の偏角を色相にマッピングします。
**視覚効果：** 渦巻き構造が強調され、特にジュリア集合で効果的です。

### 高度な数学的手法

より複雑な数学的概念を応用した手法です。

#### ポテンシャル関数法

**原理：** 複素平面上の「電位」を計算します。

```
potential = -log(log(|z|)) / log(|z|)
```

**物理的解釈：** 複素力学系の「電位」に相当します。
**特性：** フラクタル境界で急激な変化を示し、微細構造の可視化に適しています。

#### 軌道トラップ法

**原理：** 反復計算中の軌道が特定の「トラップ」（例：点(1,0)）にどれだけ近づいたかを記録します。

**アルゴリズム：** 軌道が特定の点に近づいた際の最小距離を記録します。
**芸術的効果：** 幻想的な模様（例：「渦巻き」や「花弁」状のパターン）を生成します。

## 非発散部の着色アルゴリズム

非発散部とは、フラクタル集合に属する点、つまり反復計算を最大回数行っても発散しなかった点のことです。

### 基本的な手法

#### 単色

**原理：** 非発散部を単一の色（通常は黒）で塗りつぶします。

**利点：** シンプルで発散部のパターンが際立ちます。
**用途：** 古典的なフラクタル表示に使用されます。

#### グラデーション

**原理：** 非発散部にグラデーションを適用します。

**効果：** 単色よりも視覚的に興味深い表現になります。

### 内部構造の可視化

#### 内部距離（Escape Time Distance）

**原理：** 最終的な複素数値zの大きさを利用します。

```
distance = log(|z| + 微小値) / log(2.0)
```

**効果：** 内部の構造をより詳細に表示します。境界に近い部分が明るく表示されます。

#### 軌道トラップ(円)（Orbit Trap Coloring）

**原理：** 円形のトラップ（半径R）からの距離を利用します。

**効果：** 複雑な円形パターンが生成されます。

#### 位相対称（Phase Angle Symmetry）

**原理：** 複素数の偏角を利用して対称的なパターンを作ります。

```
normalized = (角度 * 対称性次数 / (2*π)) % 1.0
```

**効果：** 放射状の対称的なパターンを生成します。次数を変えることで異なる対称性を表現できます。

### 収束特性の可視化

#### 反復収束速度（Convergence Speed）

**原理：** 最終的なzの値が小さいほど速く収束したと見なします。

**効果：** 収束の速さに基づいた興味深いパターンを生成します。

#### 微分係数（Derivative Coloring）

**原理：** 反復終了時の関数の微分係数を利用します。

**効果：** 内部構造の微細な変化を表現します。

### 統計・複素解析手法

#### 統計分布（Histogram Equalization）

**原理：** ヒストグラム平坦化を内部点に適用します。

**効果：** 内部の微細な差異を強調します。

#### 複素ポテンシャル（Complex Potential Mapping）

**原理：** 複素数のポテンシャルと角度を組み合わせます。

```
potential = log(|z| + 微小値)
combined = (normalized_potential + 係数 * 角度効果) % 1.0
```

**効果：** 波のような模様と色相の変化が組み合わさった複雑なパターンを生成します。

### 高度なパターン生成

#### カオス軌道混合（Chaotic Orbit Mixing）

**原理：** zの実部・虚部に異なる関数を適用してRGBチャンネルを別々に制御します。

**効果：** カラフルで予測不能なパターンを生成します。

#### フーリエ干渉（Fourier Pattern）

**原理：** 複数の周波数成分を合成します。

```
pattern = (sin(x * 周波数1) * cos(y * 周波数2) + sin(x * 周波数3 + y * 周波数4)) / 2.0
```

**効果：** 波状のパターンが干渉し合った模様を生成します。

#### フラクタルテクスチャ（Fractal Texture）

**原理：** 複数のスケールのノイズ関数を組み合わせます。

**効果：** 自然なテクスチャに似た複雑なパターンを生成します。

#### 量子もつれ（Quantum Entanglement）

**原理：** 複素数の実部と虚部を標準化し、非線形関数で組み合わせます。

**効果：** 量子力学的な「もつれ」を模したような複雑なパターンを生成します。

### パラメータベースの着色

#### パラメータ(C)

**原理：** Julia集合の定数Cの角度を利用します。

**効果：** Julia集合において、定数の値に基づいた色付けを行います。

#### パラメータ(Z)

**原理：** 最終的なZ値の角度を利用します。

```
角度 = arctan2(z_imag, z_real) / (2 * π) + 0.5
```

**効果：** 複素平面上の位置に基づいた色付けを行います。

## まとめ

フラクタル着色は単なる視覚効果だけでなく、フラクタルの数学的性質を可視化する手段でもあります。発散部と非発散部の両方に多様な着色アルゴリズムを適用することで、同じフラクタル構造からまったく異なる芸術的表現が可能になります。

アルゴリズムの選択や色の組み合わせを工夫することで、あなただけのユニークなフラクタルアートを創り出せるでしょう。
